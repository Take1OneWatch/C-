#include<stdio.h> 
#include<stdlib.h> 
typedef struct Node 
{ 
 int key;//每个人持有的密码 
 int num;//这个人的编号 
 struct Node *next;//指向下一个节点 
}Node,*Link; 
//================================= 
void InitList(Link &L) //创建一个空的链表 
{ 
 L=(Node *)malloc(sizeof(Node)); 
 if(!L) exit(1); 
 L->key=0; 
 L->num=0; 
 L->next=L; 
} 
void Creater(int n,Link &L) //初始化链表 
{ 
 Link p,q; 
 q=L; 
 for(int i=1;i<=n;i++) 
 { 
  p=(Node *)malloc(sizeof(Node)); 
  if(!p) exit(1); 
  printf("the key_%d is:",i); 
  scanf("%d",&p->key); 
  p->num=i; 
  L->next=p; 
  L=p; 
 } 
 L->next=q->next; 
 free(q); 
} 
void main() 
{ 
 Link L,p,q; 
 int n,x; 
 L=NULL; 
 InitList(L);//构造出一个只有头结点的空链表 
 printf("please input the totle number of people:"); 
 scanf("%d",&n);//总共的人数n 
 printf("the start key is:"); 
 scanf("%d",&x);//初始密码为x 
 Creater(n,L);//建立好一个约瑟夫环 
 p=L; 
 for(int i=1;i<=n;i++) 
 { 
  for(int j=1;j<x;j++) 
   p=p->next; 
  q=p->next; 
  x=q->key; 
  printf("%d ",q->num); 
  p->next=q->next; 
  free(q); 
 } 
}
